<!doctype html>
<html lang="en" bs-theme="auto">
  <head>
        <title>Jack's Blog - 🎨 Building colour schemes with mini.base16</title>
      <meta charset="utf-8" />
      <meta name="generator" content="Pelican" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" type="text/css" href="https://jackevansevo.github.io/theme/css/pygments.css" />
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
      <link rel="shortcut icon" type="image/x-icon" href="https://jackevansevo.github.io/theme/favicon.ico">
      <script src="https://cdn.counter.dev/script.js" data-id="91e2f16c-845b-4d6d-95f5-ec7838cee876" data-utcoffset="-3"></script>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Signika+Negative:wght@300..700&display=swap" rel="stylesheet">
<style>
main {
	font-family: "Signika Negative" !important;
	font-weight: 300;
}
</style>

        <link href="https://jackevansevo.github.io/index.xml" type="application/atom+xml" rel="alternate" title="Jack's Blog Full Atom Feed" />
  <style>
    .content {
      display: block;
      margin-left: auto;
      margin-right: auto;
      max-width: 800px;
    }
  </style>


  <style>
    article > h2, h3, h4, h5 {
      padding: 1rem 0;
    }
    article > div.highlight > pre {
      border: solid 0.1rem; rgb(33, 37, 41);
      background-color: #fdf6e3;
      padding: 0.5rem;
      border-radius: 0.4rem;
    }
  </style>



    <meta name="tags" content="neovim" />

    <script>
/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2023 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */

      (() => {
        'use strict'

        const getStoredTheme = () => localStorage.getItem('theme')
        const setStoredTheme = theme => localStorage.setItem('theme', theme)

        const getPreferredTheme = () => {
          const storedTheme = getStoredTheme()
          if (storedTheme) {
            return storedTheme
          }

          return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        }

        const setTheme = theme => {
          if (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.setAttribute('data-bs-theme', 'dark')
          } else {
            document.documentElement.setAttribute('data-bs-theme', theme)
          }
        }

        setTheme(getPreferredTheme())

        const showActiveTheme = (theme, focus = false) => {
          const themeSwitcher = document.querySelector('#bd-theme')

          if (!themeSwitcher) {
            return
          }

          const themeSwitcherText = document.querySelector('#bd-theme-text')
          const activeThemeIcon = document.querySelector('.theme-icon-active use')
          const btnToActive = document.querySelector(`[data-bs-theme-value="${theme}"]`)
          const svgOfActiveBtn = btnToActive.querySelector('svg use').getAttribute('href')

          document.querySelectorAll('[data-bs-theme-value]').forEach(element => {
            element.classList.remove('active')
            element.setAttribute('aria-pressed', 'false')
          })

          btnToActive.classList.add('active')
          btnToActive.setAttribute('aria-pressed', 'true')
          activeThemeIcon.setAttribute('href', svgOfActiveBtn)
          const themeSwitcherLabel = `${themeSwitcherText.textContent} (${btnToActive.dataset.bsThemeValue})`
          themeSwitcher.setAttribute('aria-label', themeSwitcherLabel)

          if (focus) {
            themeSwitcher.focus()
          }
        }

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
          const storedTheme = getStoredTheme()
          if (storedTheme !== 'light' && storedTheme !== 'dark') {
            setTheme(getPreferredTheme())
          }
        })

        window.addEventListener('DOMContentLoaded', () => {
          showActiveTheme(getPreferredTheme())

          document.querySelectorAll('[data-bs-theme-value]')
            .forEach(toggle => {
              toggle.addEventListener('click', () => {
                const theme = toggle.getAttribute('data-bs-theme-value')
                setStoredTheme(theme)
                setTheme(theme)
                showActiveTheme(theme, true)
              })
            })
        })
      })()
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-primary" data-bs-theme="dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="https://jackevansevo.github.io/">Jack's Blog</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/"><i class="bi bi-house-fill"></i>&nbsp;&nbsp;Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="https://jackevansevo.github.io/index.xml"><i class="bi bi-rss-fill"></i>&nbsp;&nbsp;Feed</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="https://twitter.com/Thisisjackevans"><i class="bi bi-twitter"></i>&nbsp;&nbsp;Twitter</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="https://fosstodon.org/@JackEvans"><i class="bi bi-mastodon"></i>&nbsp;&nbsp;Mastodon</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="https://www.youtube.com/channel/UC4yxFC8_z8-DeYLeHXKtdHg"><i class="bi bi-youtube"></i>&nbsp;&nbsp;Youtube</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="https://docs.google.com/document/d/e/2PACX-1vRHykkB3oIRnf7HkA6jlb_p_g47D0WPapwppQxyyss9AzXlLHqZTAT8qD0xnG7E6qSk7sNpF3GfdQdm/pub"><i class="bi bi-pen-fill"></i>&nbsp;&nbsp;Resume</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <main>
      <div class="container p-lg-5 p-3">
<div class="content">
  <h1>
    <a href="https://jackevansevo.github.io/building-colour-schemes-with-minibase16.html" rel="bookmark" class="link-underline link-underline-opacity-0 link-underline-opacity-75-hover" title="Permalink to 🎨 Building colour schemes with mini.base16">🎨 Building colour schemes with mini.base16</a>
  </h1>
  <header>
    
  </header>
  <footer>
    <time datetime="2023-10-15T00:00:00+01:00">
	    <i class="bi bi-clock"></i><b>Published:</b> Sun 15 October 2023
    </time>
<div>
<i class="bi bi-tags"></i>&nbsp;<b>Tags</b>:
  <a href="https://jackevansevo.github.io/tag/neovim.html"><span class="badge" style="background: #7bb65a">neovim</span></a>
</div>
  </footer><!-- /.post-info -->
  <hr>
  <article>
    <p>I'm a huge fan of <a href="https://github.com/echasnovski/mini.nvim">mini.nvim</a>. If you're unfamiliar here's a description from the plugins readme:</p>
<div class="alert alert-info">
Library of 30+ independent Lua modules improving overall Neovim (version 0.7 and higher) experience with minimal effort. They all share same configuration approaches and general design principles.
<br>
<br>
Think about this project as "Swiss Army knife" among Neovim plugins: it has many different independent tools (modules) suitable for most common tasks. Each module can be used separately without any startup and usage overhead.
</div>

<p>Out the box it replaces 90% of the plugins I was previously using. The major
benefit here is that the mini.nvim plugins are cohesive and designed to work
together. Consequently I've not encountered any behaviour with conflicting
plugins, i.e. overlapping keybindings, like I'd experienced in the past.</p>
<hr>
<h2>mini.base16</h2>
<p>mini.nvim comes with <a href="https://github.com/echasnovski/mini.nvim#plugin-colorschemes">a few
themes</a>
<code>minischeme</code>, <code>minicyan</code> and <code>randomhue</code> (which you can see
<a href="https://github.com/echasnovski/mini.nvim/blob/main/readmes/mini-base16.md#demo">here</a>)
but these aren't really to my taste.</p>
<p>Fortunately, mini.nvim comes with:
<a href="https://github.com/echasnovski/mini.base16">mini.base16</a>, a plugin that allows
you to generate vim colorschemes from a base16 palette. The <a href="https://github.com/chriskempson/base16">base16
project</a> is a popular framework for
expressing colorschemes from a palette of 16 colours. Various tools exist to
convert these palettes into colorschemes for different applications.</p>
<div class="alert alert-warning fst-italic">
Aside: if you've been programming for
any length of time, you'll probably immediately recognise some of the more
popular base16 palettes, as they're used by a <a class="alert-link fw-normal" href="https://github.com/chriskempson/base16#used-by">quite a few popular applications</a>
</div>

<p><br></p>
<p><strong>What about existing base16 vim colorschemes?</strong></p>
<p>base16 already has existing colorscheme ports available in the form of
<a href="https://github.com/chriskempson/base16-vim">chriskempson/base16-vim</a>, various
lua ports also exist for neovim. These are great if you're happy with a fairly
vanilla vim/neovim setup.</p>
<p>The problem is these colorscheme implementations might not necessarily support
certain third plugins you're using, so things might end up looking ugly or
visually broken.</p>
<p>Using the <a href="https://github.com/echasnovski/mini.base16">mini.base16</a> plugin you
can take a base16 colour palette and generate a neovim colorscheme that
supports all the mini.nvim plugins + a bunch of popular third party vim/neovim
plugins (a full list of supported plugins is available
<a href="https://github.com/echasnovski/mini.nvim/blob/main/readmes/mini-base16.md#features">here</a>).</p>
<p>The end result is something like this:</p>
<p><img src="https://jackevansevo.github.io/images/base16-mocha.png" class="img-fluid rounded mx-auto d-block" alt="base16 mocha mini.base16 theme"></p>
<h3>Building Themes</h3>
<p>Here's an example base16 palette (for the <a href="https://github.com/chriskempson/base16-default-schemes/blob/master/mocha.yaml">mocha colorscheme</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mocha&quot;</span>
<span class="nt">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Chris</span><span class="nv"> </span><span class="s">Kempson</span><span class="nv"> </span><span class="s">(http://chriskempson.com)&quot;</span>
<span class="nt">base00</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3B3228&quot;</span>
<span class="nt">base01</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;534636&quot;</span>
<span class="nt">base02</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;645240&quot;</span>
<span class="nt">base03</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7e705a&quot;</span>
<span class="nt">base04</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b8afad&quot;</span>
<span class="nt">base05</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;d0c8c6&quot;</span>
<span class="nt">base06</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;e9e1dd&quot;</span>
<span class="nt">base07</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;f5eeeb&quot;</span>
<span class="nt">base08</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cb6077&quot;</span>
<span class="nt">base09</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;d28b71&quot;</span>
<span class="nt">base0A</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;f4bc87&quot;</span>
<span class="nt">base0B</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;beb55b&quot;</span>
<span class="nt">base0C</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7bbda4&quot;</span>
<span class="nt">base0D</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8ab3b5&quot;</span>
<span class="nt">base0E</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a89bb9&quot;</span>
<span class="nt">base0F</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bb9584&quot;</span>
</code></pre></div>

<p>I can take these definitions and create a corresponding <code>mini.base16</code> colorscheme:</p>
<div class="highlight"><pre><span></span><code><span class="nb">require</span><span class="p">(</span><span class="s1">&#39;mini.base16&#39;</span><span class="p">).</span><span class="n">setup</span><span class="p">({</span>
  <span class="n">palette</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">base00</span> <span class="o">=</span> <span class="s2">&quot;#3B3228&quot;</span><span class="p">,</span>
    <span class="n">base01</span> <span class="o">=</span> <span class="s2">&quot;#534636&quot;</span><span class="p">,</span>
    <span class="n">base02</span> <span class="o">=</span> <span class="s2">&quot;#645240&quot;</span><span class="p">,</span>
    <span class="n">base03</span> <span class="o">=</span> <span class="s2">&quot;#7e705a&quot;</span><span class="p">,</span>
    <span class="n">base04</span> <span class="o">=</span> <span class="s2">&quot;#b8afad&quot;</span><span class="p">,</span>
    <span class="n">base05</span> <span class="o">=</span> <span class="s2">&quot;#d0c8c6&quot;</span><span class="p">,</span>
    <span class="n">base06</span> <span class="o">=</span> <span class="s2">&quot;#e9e1dd&quot;</span><span class="p">,</span>
    <span class="n">base07</span> <span class="o">=</span> <span class="s2">&quot;#f5eeeb&quot;</span><span class="p">,</span>
    <span class="n">base08</span> <span class="o">=</span> <span class="s2">&quot;#cb6077&quot;</span><span class="p">,</span>
    <span class="n">base09</span> <span class="o">=</span> <span class="s2">&quot;#d28b71&quot;</span><span class="p">,</span>
    <span class="n">base0A</span> <span class="o">=</span> <span class="s2">&quot;#f4bc87&quot;</span><span class="p">,</span>
    <span class="n">base0B</span> <span class="o">=</span> <span class="s2">&quot;#beb55b&quot;</span><span class="p">,</span>
    <span class="n">base0C</span> <span class="o">=</span> <span class="s2">&quot;#7bbda4&quot;</span><span class="p">,</span>
    <span class="n">base0D</span> <span class="o">=</span> <span class="s2">&quot;#8ab3b5&quot;</span><span class="p">,</span>
    <span class="n">base0E</span> <span class="o">=</span> <span class="s2">&quot;#a89bb9&quot;</span><span class="p">,</span>
    <span class="n">base0F</span> <span class="o">=</span> <span class="s2">&quot;#bb9584&quot;</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">})</span>

<span class="n">vim</span><span class="p">.</span><span class="n">g</span><span class="p">.</span><span class="n">colors_name</span> <span class="o">=</span> <span class="s2">&quot;base16-mocha&quot;</span>
</code></pre></div>

<p>I found it quite painful to manually have to copy/paste these values over from
a <code>.yaml</code> colour palette into the equivalent <code>.lua</code> format that <code>mini.base16</code>
expects. So I wrote a quick and dirty Python script to do the conversion:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="k">for</span> <span class="n">theme</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.yaml&quot;</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">theme</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.lua&#39;</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;require(&#39;mini.base16&#39;).setup({&quot;</span><span class="p">,</span> <span class="s1">&#39;  palette = {&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">theme</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;base&#39;</span><span class="p">):</span>
            <span class="n">dec</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;: &#39;</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    </span><span class="si">{</span><span class="n">dec</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">color</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;#&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s1">,&#39;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  },&#39;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;})</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;vim.g.colors_name = &quot;</span><span class="si">{</span><span class="n">theme</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="n">out</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
</code></pre></div>

<p>Or you can take the existing <a href="">vim base16 themes</a> and convert these to the <code>mini.base16</code> lua equivalents</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="k">for</span> <span class="n">theme</span> <span class="ow">in</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;colors&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.vim&quot;</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">theme</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s1">&#39;.lua&#39;</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;require(&#39;mini.base16&#39;).setup({&quot;</span><span class="p">,</span> <span class="s1">&#39;  palette = {&#39;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">theme</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;let s:gui&#39;</span><span class="p">):</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">dec</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    base</span><span class="si">{</span><span class="n">dec</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">color</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;#&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="si">}</span><span class="s1">,&#39;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  },&#39;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;})</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;vim.g.colors_name = &quot;</span><span class="si">{</span><span class="n">theme</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="n">out</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
</code></pre></div>

<h2>🖼️ Theme showcase</h2>
<p>Below is an example of a few mini.base16 themes in action:</p>
<video class="w-100" controls>
    <source src="https://jackevansevo.github.io/images/base16-themes.mp4">
</video>

<p>You can find these converted themes from the above showcase in my
<a href="https://github.com/Jackevansevo/Dotfiles/tree/main/nvim/colors">Dotfiles</a>.</p>
  </article>
</div>
      </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>